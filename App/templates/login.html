{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>DEFENCIA Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root{--neo:#00ffcc;}
    body{
      min-height:100dvh;background:#111;color:var(--neo);
      display:flex;align-items:center;justify-content:center;
      font-family:"Courier New",monospace;padding:16px;
    }
    .card{
      width:100%;max-width:420px;background:#1d1f1f;border:0;border-radius:14px;
      box-shadow:0 0 24px var(--neo);
    }
    .card h1{font-size:clamp(20px,4.5vw,28px);color:#00ffe0;text-align:center;text-shadow:0 0 10px #00ffe0;}
    .form-control{background:#0e0e0e;border:1px solid var(--neo);color:var(--neo);}
    .form-control:focus{box-shadow:0 0 8px var(--neo);border-color:#00e6b8;color:var(--neo);}
    .btn-neo{background:var(--neo);color:#000;font-weight:700;border:0}
    .btn-neo:hover{background:#00e6b8;box-shadow:0 0 12px #00ffe0}
    a{color:var(--neo)} a:hover{color:#00e6b8}
  </style>
</head>
<body>
  <div class="card p-4">
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-dark border border-success text-success py-2">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <h1 class="mb-3">DEFENCIA Login</h1>

    <form method="post" novalidate>
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert alert-danger py-2">
          {% for e in form.non_field_errors %} <div>{{ e }}</div> {% endfor %}
        </div>
      {% endif %}

      <div class="mb-3">
        <label class="form-label">Username</label>
        <input name="username" autocomplete="username" value="{{ form.username.value|default:'' }}" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Password</label>
        <div class="input-group">
          <input id="password" type="password" name="password" autocomplete="current-password" class="form-control" required>
          <button class="btn btn-outline-light" type="button" id="togglePassword"><i class="bi bi-eye"></i></button>
        </div>
      </div>

      <button class="btn btn-neo w-100 mb-3" type="submit">Login</button>

      <div class="text-center">
        <a href="{% url 'App:forget_password' %}">Forgot password?</a>
      </div>
      <div class="text-center mt-2">
        <a href="{% url 'App:Register' %}" class="btn btn-sm btn-outline-light">Create new account</a>
      </div>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById("togglePassword").onclick = () => {
      const p = document.getElementById("password");
      p.type = p.type === "password" ? "text" : "password";
      const i = document.querySelector("#togglePassword i");
      i.classList.toggle("bi-eye"); i.classList.toggle("bi-eye-slash");
    };
  </script>
</body>
</html>
